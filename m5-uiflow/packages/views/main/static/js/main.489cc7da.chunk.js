(this["webpackJsonpelectron-m5burner-v2-web"]=this["webpackJsonpelectron-m5burner-v2-web"]||[]).push([[0],Array(25).concat([function(e,t,a){e.exports=a(65)},,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t){"getContext"in document.createElement("canvas")&&(HTMLImageElement.prototype.play=function(){this.storeCanvas&&(this.storeCanvas.parentElement.removeChild(this.storeCanvas),this.storeCanvas=null,this.style.opacity=""),this.storeUrl&&(this.src=this.storeUrl)},HTMLImageElement.prototype.stop=function(){var e=this,t=document.createElement("canvas"),a=new Image;a.src=this.src,a.onload=function(a){var n=this.width,l=this.height;if(n&&l){e.storeUrl||(e.storeUrl=e.src),t.width=n,t.height=l,console.log(n,l),t.getContext("2d").drawImage(e,0,0,n,l);try{e.src=t.toDataURL("image/gif")}catch(r){e.removeAttribute("src"),t.style.position="absolute",e.parentElement.insertBefore(t,e),e.style.opacity="0",e.storeCanvas=t}}}})},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(6),c=a.n(r),o=a(5),i=a(11),s=a(2),m="light",u="dark",d="fade-in",p="fade-out",f="downloading",g="end",v="error",E=["1500000","921600","750000","512000","256000","230400","115200"],b="SET_THEME",w="SET_LANGUAGE",h="SET_BURN_PARAMS",_="SET_VERSION",y="SET_LASTEST_VERSION",O="SET_LOGIN_STATE",N="SET_OWNS";function k(e){return{type:b,payload:e}}function S(e){return{type:h,payload:e}}function C(e){return{type:O,payload:e}}var x={theme:m,language:"en",burnParams:{flashMode:"dio",flashFrequency:"80m",flashSize:"detect"},version:"",lastest:"",loginState:!1,ssoToken:"",owns:[]};var j="OPEN_MODAL",I="CLOSE_MODAL",M="SET_ANIMATION_STATE";function T(e){return Object(s.a)({type:j},e)}function L(e){return Object(s.a)({type:M},e)}var B={visiable:!1,component:null,animation:""};var F="SET_COM",H="SET_BAUDRATE";function D(e){return Object(s.a)({type:H},e)}var A={com:"",baudrate:"1500000"};var P="START_STDOUT",R="APPEND_STDOUT";function U(e){return{type:P,payload:e}}function z(e){return{type:R,payload:e}}var W={message:""};var G="GET_FIRMWARE",V="UPDATE_FIRMWARES",q="SELECT_FIRMWARE_TYPE",K="UPDATE_DOWNLOAD_STATUS",J="SEARCH_FIRMWARE";var Y={list:{core:[],core2:[],stickc:[],atom:[],stickv:[],timercam:[],coreink:[],paper:[],stamp:[]},raw:{core:[],core2:[],stickc:[],atom:[],stickv:[],timercam:[],coreink:[],paper:[],stamp:[]},selected:"core",keyword:""};var X=Object(i.b)({global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case w:return Object(s.a)({},e,{},t.payload);case h:return Object(s.a)({},e,{burnParams:Object(s.a)({},e.burnParams,{},t.payload)});case _:case y:case O:case N:return Object(s.a)({},e,{},t.payload);default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(s.a)({},e,{visiable:!0,component:t.component});case I:return Object(s.a)({},e,{visiable:!1,component:null});case M:return Object(s.a)({},e,{animation:t.animation});default:return e}},burn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(s.a)({},e,{com:t.com});case H:return Object(s.a)({},e,{baudrate:t.baudrate});default:return e}},stdout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{message:t.payload.message};case R:return{message:e.message+t.payload.message};default:return e}},firmware:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(s.a)({},e,{list:t.payload,raw:t.payload});case V:var a=JSON.parse(JSON.stringify(t.payload));return Object(s.a)({},e,{list:a});case q:return Object(s.a)({},e,{selected:t.payload});case K:return(a=(n=JSON.parse(JSON.stringify(e))).list[t.payload.type]).forEach((function(e){if(e.name===t.payload.name){var a=e.versions.find((function(e){return e.version===t.payload.version}));a.downloadStatus=t.payload.downloadStatus,a.progress=t.payload.progress,t.payload.downloadStatus===g&&(a.exist=!0)}})),Object(s.a)({},e,{},n);case J:var n=JSON.parse(JSON.stringify(e));if(""===t.payload)return Object(s.a)({},n,{list:n.raw});var l={};for(var r in n.list)l[r]=n.raw[r].filter((function(e){return e.name.toUpperCase().includes(t.payload.toUpperCase())}));return Object(s.a)({},n,{list:l});default:return e}}}),Q=Object(i.c)(X),Z=a(4),$=a.n(Z),ee=window.require("electron").ipcRenderer,te="Minimize",ae="Maximize",ne="Quit",le="Restart",re="GetPorts",ce="Erase",oe="Burn",ie="SaveConfig",se="LoadAllConfig",me="WatchCOM",ue="CloseCOM",de="GetFirmwares",pe="DownloadFirmware",fe="RemoveFirmware",ge="WriteCOM",ve="Update",Ee="GetSttToken",be="GetUIFlowSetting",we="SetUIFlowSetting",he="KillTask",_e="Login",ye="Logout",Oe="BindDevice",Ne="ResetDevice",ke=function(e,t,a){var n="".concat(e,"Callback");ee.eventNames().includes(n)||ee.on(n,(function(e,t){a&&a(t)})),ee.send(e,t)},Se=function(e,t,a){var n="".concat(e,"Callback");ee.eventNames().includes(n)||ee.once(n,(function(e,t){a&&a(t)})),ee.send(e,t)},Ce=function(e,t,a,n){var l="".concat(t,"Callback-").concat(e);ee.eventNames().includes(l)||ee.on(l,(function(e,t){n&&n(t)})),ee.send(t,a)},xe=a(12),je=a(7),Ie=a(8),Me=a(3),Te=a(9),Le=a(10);a(35);var Be=Object(o.b)((function(e){return{config:e.global}}),{})((function(e){var t=e.onClose,a=e.config,r=e.onChange,c=e.onUpdate,o=Object(n.useRef)();Object(n.useEffect)((function(){var e=setTimeout((function(){o.current.classList.add("slide-in")}));return function(){o.current.classList.remove("slide-in"),o.current.classList.add("slide-out"),clearTimeout(e)}}),[]);var i=function(){o.current.classList.remove("slide-in"),o.current.classList.add("slide-out"),setTimeout((function(){t()}),250)},s=function(e,t){r(e,t)};return l.a.createElement("div",{className:"wrapper-panel-preference",onClick:i},l.a.createElement("div",{className:"panel-preference",ref:o,onClick:function(e){return e.stopPropagation()}},l.a.createElement("h2",null,"Preference"),l.a.createElement("form",{className:"form-preference"},l.a.createElement("h3",null,"General"),l.a.createElement("div",{className:"form-item"},l.a.createElement("label",null,"Theme"),l.a.createElement("select",{value:a.theme,onChange:function(e){r("theme",e.target.value)}},l.a.createElement("option",{value:m},"Light"),l.a.createElement("option",{value:u},"Dark"))),l.a.createElement("h3",null,"Advanced"),l.a.createElement("div",{className:"form-item"},l.a.createElement("label",null,"Flash Frequency"),l.a.createElement("select",{value:a.burnParams.flashFrequency,onChange:function(e){return s("flashFrequency",e.target.value)}},l.a.createElement("option",{value:"80m"},"80m"),l.a.createElement("option",{value:"40m"},"40m"),l.a.createElement("option",{value:"26m"},"26m"),l.a.createElement("option",{value:"20m"},"20m"),l.a.createElement("option",{value:"keep"},"Keep"))),l.a.createElement("div",{className:"form-item"},l.a.createElement("label",null,"Flash Size"),l.a.createElement("select",{value:a.burnParams.flashSize,onChange:function(e){return s("flashSize",e.target.value)}},l.a.createElement("option",{value:"detect"},"Detect"),l.a.createElement("option",{value:"16MB"},"16MB"),l.a.createElement("option",{value:"4MB"},"4MB"),l.a.createElement("option",{value:"2MB"},"2MB"),l.a.createElement("option",{value:"1MB"},"1MB"))),l.a.createElement("h3",null,"Version"),l.a.createElement("div",{className:"form-item"},l.a.createElement("label",null,"Current: ",a.version)),l.a.createElement("div",{className:"form-item"},l.a.createElement("label",null,"Lastest: ",a.lastest),a.lastest>a.version?l.a.createElement("a",{className:"btn-update",onClick:c},"Update"):null)),l.a.createElement("footer",null,l.a.createElement("button",{className:"btn cancel",onClick:i},"Back"))))})),Fe=a(1),He=(a(36),function(e){var t=Object(n.useState)(localStorage.getItem("m5sso_email")||""),a=Object(Fe.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(localStorage.getItem("m5sso_password")||""),i=Object(Fe.a)(o,2),s=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(Fe.a)(u,2),p=d[0],f=d[1];return l.a.createElement("div",{className:"login--form"},l.a.createElement("img",{className:"logo",src:"assets/images/logo.png",alt:"logo"}),l.a.createElement("div",{className:"item"},l.a.createElement("span",null,"Email:"),l.a.createElement("input",{value:r,onChange:function(e){return c(e.target.value)}})),l.a.createElement("div",{className:"item"},l.a.createElement("span",null,"Password:"),l.a.createElement("input",{value:s,type:"password",onChange:function(e){return m(e.target.value)}})),l.a.createElement("div",{className:"item"},l.a.createElement("a",{className:"link",onClick:function(t){e.gotoRegister()}},"Create a new account")),l.a.createElement("div",{className:"item"},l.a.createElement("a",{className:"link",onClick:function(t){e.gotoReset()}},"Forget password")),l.a.createElement("div",{className:"controller"},l.a.createElement("button",{className:"btn-cancel",onClick:function(){window.swal.close()}},l.a.createElement("span",null,"Cancel")),l.a.createElement("button",{className:p?"loading":"",onClick:function(){p||(f(!0),e.onLogin(r,s,(function(){f(!1),window.swal({text:"Login failed, check your email or password.",icon:"error"})})))}},p?l.a.createElement("i",{className:"iconfont icon-spin spin"}):null,l.a.createElement("span",null,"Login"))))}),De=(a(37),window.require("electron")),Ae=(De.ipcRenderer,De.shell),Pe=function(e){Object(Le.a)(a,e);var t=Object(Te.a)(a);function a(){var e;return Object(je.a)(this,a),(e=t.call(this)).maximize=e.maximize.bind(Object(Me.a)(e)),e.minimize=e.minimize.bind(Object(Me.a)(e)),e.quit=e.quit.bind(Object(Me.a)(e)),e.update=e.update.bind(Object(Me.a)(e)),e.openPreferencePanel=e.openPreferencePanel.bind(Object(Me.a)(e)),e.changeSelectorHandler=e.changeSelectorHandler.bind(Object(Me.a)(e)),e.openLoginForm=e.openLoginForm.bind(Object(Me.a)(e)),e.handleLogout=e.handleLogout.bind(Object(Me.a)(e)),e.handleGotoDeviceManagement=e.handleGotoDeviceManagement.bind(Object(Me.a)(e)),window.test=e.update.bind(Object(Me.a)(e)),e}return Object(Ie.a)(a,[{key:"openPreferencePanel",value:function(){if(!this.props.modal.visiable){var e=this.props.hideModal;this.props.openModal(l.a.createElement(Be,{onChange:this.changeSelectorHandler,onClose:e,onUpdate:this.update}))}}},{key:"changeSelectorHandler",value:function(e,t){"theme"===e?(this.props.setTheme(t),ke(ie,{key:e,value:t})):(this.props.setBurnParams(e,t),ke(ie,{key:"burnParams",value:Object(xe.a)({},e,t)}))}},{key:"maximize",value:function(){ke(ae,null,null)}},{key:"minimize",value:function(){ke(te,null,null)}},{key:"quit",value:function(){ke(ne,null,null)}},{key:"update",value:function(){var e=this;window.swal({title:"Tips",text:"Do you sure to update?",icon:"warning",buttons:{confirm:{text:"Yes",closeModal:!1,value:!0},cancel:{text:"No",closeModal:!1,value:!1,visible:!0}},closeOnClickOutside:!1,closeOnEsc:!1}).then((function(t){if(!t)return window.swal.getState().actions.cancel.closeModal=!0,window.swal.stopLoading(),void window.swal.close();document.getElementsByClassName("swal-title")[0].style.display="none",ke(ve,{lastest:e.props.global.lastest},(function(e){var t=document.getElementsByClassName("swal-text")[0];if(!1===e)return t.innerText="Download update failed.",window.swal.getState().actions.confirm.closeModal=!0,window.swal.getState().actions.cancel.closeModal=!0,void window.swal.stopLoading();if(!0!==e)t.innerText="Update ... (".concat(100*e,"%)");else{t.innerText="Update successfully. Restart takes effect",window.swal.getState().actions.confirm.closeModal=!0,window.swal.getState().actions.cancel.closeModal=!0,window.swal.stopLoading();var a=document.querySelectorAll(".swal-button.swal-button--confirm");a.length>0&&a[0].addEventListener("click",(function(e){!function(e,t,a){var n=ee.sendSync(e,t);a&&a(n)}(le,null)}))}}))}))}},{key:"handleLogin",value:function(e,t,a){var n=this;Se(_e,{email:e,password:t},(function(l){l?(localStorage.setItem("m5sso_email",e),localStorage.setItem("m5sso_password",t),window.swal.close(),window.swal({text:"Welcome ".concat(e),icon:"success"}),n.props.setLoginState({isLogin:!0,ssoToken:l})):a()}))}},{key:"handleLogout",value:function(){var e=this;window.swal({title:"Logout",text:"Do you sure to logout?",icon:"warning",buttons:{confirm:{text:"Yes",value:!0},cancel:{text:"No",value:!1,visible:!0}}}).then((function(t){t&&Se(ye,null,(function(){e.props.setLoginState({isLogin:!1,ssoToken:""})}))}))}},{key:"handleGotoRegister",value:function(){Ae.openExternal("https://forum.m5stack.com/register")}},{key:"handleGotoReset",value:function(){Ae.openExternal("https://forum.m5stack.com/reset")}},{key:"handleGotoDeviceManagement",value:function(){Ae.openExternal("https://devm.m5stack.com/"+"?sid=".concat(this.props.global.ssoToken))}},{key:"openLoginForm",value:function(){var e=document.createElement("div");c.a.render(l.a.createElement(He,{onLogin:this.handleLogin.bind(this),gotoRegister:this.handleGotoRegister.bind(this),gotoReset:this.handleGotoReset.bind(this)}),e),window.swal({className:"wifi-modal",content:e,closeOnEsc:!1,closeOnClickOutside:!1,buttons:{}})}},{key:"checkVersion",value:function(){var e=this.props.global,t=e.version;return e.lastest>t}},{key:"render",value:function(){var e=localStorage.getItem("m5sso_email")||"",t=this.checkVersion();return l.a.createElement("div",{className:"app-top-bar"},l.a.createElement("div",{className:"logo"},l.a.createElement("img",{className:"topbar-logo",src:"assets/images/logo.png"}),l.a.createElement("span",null,"M5Burner")),l.a.createElement("div",{className:"control-box"},this.props.global.loginState?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn-control btn-user"},l.a.createElement("i",{className:"iconfont icon-user"}),l.a.createElement("span",null,e),l.a.createElement("div",{className:"menu"},l.a.createElement("p",{onClick:this.handleGotoDeviceManagement},l.a.createElement("i",{className:"iconfont icon-device"}),l.a.createElement("span",null,"Device Management")))),l.a.createElement("button",{className:"btn-control btn-user",onClick:this.handleLogout},l.a.createElement("i",{className:"iconfont icon-log-out"}))):l.a.createElement("button",{className:"btn-control btn-user",onClick:this.openLoginForm},l.a.createElement("i",{className:"iconfont icon-user"})),l.a.createElement("button",{className:$()("btn-control","btn-setting",t?"notice":""),onClick:this.openPreferencePanel},l.a.createElement("i",{className:"iconfont icon-setting"})),l.a.createElement("button",{className:"btn-control btn-min",onClick:this.minimize},l.a.createElement("i",{className:"iconfont icon-zuixiaohua"})),l.a.createElement("button",{className:"btn-control btn-max",onClick:this.maximize},l.a.createElement("i",{className:"iconfont icon-zuidahua"})),l.a.createElement("button",{className:"btn-control btn-close",onClick:this.quit},l.a.createElement("i",{className:"iconfont icon-guanbi"}))))}}]),a}(l.a.Component),Re=Object(o.b)((function(e){return{modal:e.modal,global:e.global}}),(function(e){return{openModal:function(t){return e(T({component:t}))},hideModal:function(t){return e(L({animation:p}))},setTheme:function(t){return e(k({theme:t}))},setBurnParams:function(t,a){return e(S(Object(xe.a)({},t,a)))},setLoginState:function(t){return e(C({loginState:t.isLogin,ssoToken:t.ssoToken}))}}}))(Pe);var Ue=function(e){var t=e.icon,a=e.field,n=e.value,r=e.options,c=e.onChange,o=e.onClick;return l.a.createElement("li",{className:"header-form-item"},l.a.createElement("i",{className:$()("iconfont",t)}),l.a.createElement("span",null,a,":"),l.a.createElement("select",{value:n,onChange:c,onClick:o},r.map((function(e){return l.a.createElement("option",{key:e,value:e},e)}))))};a(38),a(39);var ze=Object(o.b)((function(e){return{stdout:e.stdout}}),(function(e){return{}}))((function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){t.current.scrollTo(0,t.current.scrollHeight)}),[e.stdout.message]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"wrapper-serial-log",ref:t},l.a.createElement("pre",null,e.stdout.message)),e.footer)})),We=(a(40),window.require("electron").ipcRenderer),Ge=function(e){Object(Le.a)(a,e);var t=Object(Te.a)(a);function a(){var e;return Object(je.a)(this,a),(e=t.call(this)).bindLock=!1,e.state={coms:[],ssid:localStorage.getItem("ssid")||"",password:localStorage.getItem("password")||"",passwordVisible:!1},e.changeCOMHandler=e.changeCOMHandler.bind(Object(Me.a)(e)),e.changeBaudrateHandler=e.changeBaudrateHandler.bind(Object(Me.a)(e)),e.refreshCOMs=e.refreshCOMs.bind(Object(Me.a)(e)),e.erase=e.erase.bind(Object(Me.a)(e)),e.watchCOM=e.watchCOM.bind(Object(Me.a)(e)),e.updateSSID=e.updateSSID.bind(Object(Me.a)(e)),e.updatePassword=e.updatePassword.bind(Object(Me.a)(e)),e.togglePasswordVisible=e.togglePasswordVisible.bind(Object(Me.a)(e)),e.bindDevice=e.bindDevice.bind(Object(Me.a)(e)),e}return Object(Ie.a)(a,[{key:"componentWillMount",value:function(){this._getPorts()}},{key:"_getPorts",value:function(){var e=this;ke(re,null,(function(t){e.setState({coms:t.map((function(e){return e.path}))},(function(){t.length>0&&""===e.props.com&&e.props.setCOM(e.state.coms[0])}))}))}},{key:"refreshCOMs",value:function(e){this._getPorts(),this.props.com!==e.target.value&&this.props.setCOM(e.target.value)}},{key:"changeCOMHandler",value:function(e){this.props.setCOM(e.target.value)}},{key:"changeBaudrateHandler",value:function(e){this.props.setBaudrate(e.target.value),ke(ie,{key:"baudrate",value:e.target.value})}},{key:"erase",value:function(e){var t=this;e.preventDefault();var a=this.props.closeModal,n=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"footer-btn"},l.a.createElement("button",{onClick:function(){We.send(he),a()}},"Close")));this.props.openModal(l.a.createElement(ze,{footer:n})),this.props.startStdoutMessage("=================\nErase now\n=================\n"),ke(ce,{com:this.props.com},(function(e){t.props.appendStdoutMessage(e)}))}},{key:"watchCOM",value:function(e){var t=this;e.preventDefault();var a=this,n=this.props.closeModal,r=function(){var e=function(){var e=document.getElementById("_sendbox").value;ke(ge,{com:a.props.com,data:e},null)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"footer-btn"},l.a.createElement("textarea",{id:"_sendbox",className:"sendbox",type:"text",onKeyPress:function(t){13===t.charCode&&t.ctrlKey&&e()}}),l.a.createElement("button",{className:"reset",onClick:function(){ke(Ne,{com:a.props.com},null)}},"Reset"),l.a.createElement("button",{className:"send",onClick:e},"Send"),l.a.createElement("button",{onClick:function(){We.eventNames().includes("".concat(me,"Callback"))&&ke(ue,null),n()}},"Close")))}();this.props.openModal(l.a.createElement(ze,{footer:r,com:this.props.com})),this.props.startStdoutMessage("=================\n".concat(this.props.com,"\n=================\n")),ke(me,{com:this.props.com},(function(e){t.props.appendStdoutMessage(e)}))}},{key:"updateSSID",value:function(e){this.setState({ssid:e.target.value}),localStorage.setItem("ssid",e.target.value)}},{key:"updatePassword",value:function(e){this.setState({password:e.target.value}),localStorage.setItem("password",e.target.value)}},{key:"togglePasswordVisible",value:function(){this.setState({passwordVisible:!this.state.passwordVisible})}},{key:"bindDevice",value:function(e){var t=this;e.preventDefault(),window.swal({title:"",text:"Adding device, wait a minute...",icon:"warning",closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1}),Se(Oe,{com:this.props.com},(function(e){if(-1===e)return t.props.setLoginState(!1),void window.swal({title:"",text:"The login status has expired, please log in again",icon:"warning"});!1===e?window.swal({title:"",text:"Invalid device",icon:"error"}):!0===e?window.swal({title:"",text:"Device has been added in your account.",icon:"success"}):-1e3===e?window.swal({title:"",text:"Network occured errors",icon:"error"}):400===e?window.swal({className:"binding-tip-modal",title:"",text:"This device has been bound, try again after unbinding.",icon:"error"}):window.swal({title:"",text:"Network occured errors",icon:"error"})}))}},{key:"render",value:function(){var e=this.props,t=e.com,a=e.baudrate;return l.a.createElement("form",{className:"header-form"},l.a.createElement(Ue,{icon:"icon-usb",field:"COM",value:t,options:this.state.coms,onChange:this.changeCOMHandler.bind(this),onClick:this.refreshCOMs.bind(this)}),l.a.createElement(Ue,{icon:"",field:"Baudrate",value:a,options:E,onChange:this.changeBaudrateHandler}),l.a.createElement("button",{className:"btn erase",onClick:this.erase},l.a.createElement("i",{className:"iconfont icon-erase"}),l.a.createElement("span",null,"Erase")),l.a.createElement("button",{className:"btn open",onClick:this.watchCOM},l.a.createElement("i",{className:"iconfont icon-usb"}),l.a.createElement("span",null,"COM Monitor")),this.props.global.loginState?l.a.createElement("button",{className:"btn bind",onClick:this.bindDevice},l.a.createElement("i",{className:"iconfont icon-bind"}),l.a.createElement("span",null,"Bind with account")):null)}}]),a}(l.a.Component),Ve=Object(o.b)((function(e){return{com:e.burn.com,global:e.global,baudrate:e.burn.baudrate}}),(function(e){return{openModal:function(t){return e(T({component:t}))},closeModal:function(t){return e(L({animation:p}))},setBaudrate:function(t){return e(D({baudrate:t}))},setCOM:function(t){return e((a={com:t},Object(s.a)({type:F},a)));var a},startStdoutMessage:function(t){return e(U({message:t}))},appendStdoutMessage:function(t){return e(z({message:t}))},setLoginState:function(t){return e(C({loginState:t}))}}}))(Ge),qe=(a(41),function(e){Object(Le.a)(a,e);var t=Object(Te.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(Ie.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"app-header"},l.a.createElement(Ve,null))}}]),a}(l.a.Component)),Ke=Object(o.b)((function(e){return{}}),(function(e){return{}}))(qe);a(42);var Je=function(e){e.owns;var t=e.selected,a=e.setSelected,r=Object(n.useRef)(),c=Object(n.useRef)(),o=Object(n.useRef)();Object(n.useEffect)((function(){r.current.addEventListener("scroll",(function(e){console.log(e),0===r.current.scrollTop?(c.current.classList.remove("show"),o.current.classList.add("show")):764===r.current.scrollTop?(c.current.classList.add("show"),o.current.classList.remove("show")):(c.current.classList.add("show"),o.current.classList.add("show"))}))}),[]);var i=[{name:"core",light:"light-core.png",dark:"dark-core.png"},{name:"core2",light:"light-tough.png",dark:"dark-tough.png"},{name:"stickc",light:"light-stickc.png",dark:"dark-stickc.png"},{name:"atom",light:"light-atom.png",dark:"dark-atom.png"},{name:"stickv",light:"light-stickv.png",dark:"dark-stickv.png"},{name:"timercam",light:"light-timercam.png",dark:"dark-timercam.png"},{name:"coreink",light:"light-coreink.png",dark:"dark-coreink.png"},{name:"paper",light:"light-paper.png",dark:"dark-paper.png"},{name:"stamp",light:"light-stamp.png",dark:"dark-stamp.png"}].map((function(e){return l.a.createElement("li",{key:e.name,className:$()("item-device",t===e.name?"selected":""),onClick:function(){return a(e.name)}},l.a.createElement("figure",null,l.a.createElement("img",{className:"avatar",src:"./assets/images/"+e.light,alt:e.name,draggable:"false"}),l.a.createElement("figcaption",null,(n=e.name,"stickv"===n?"stickv & unitv":"core2"===n?"core2 & tough":n).toUpperCase())));var n}));return l.a.createElement("div",{className:"list-device-wrapper"},l.a.createElement("div",{className:"top-arrow",ref:c},l.a.createElement("img",{src:"./assets/images/top-arrow.png",alt:"top"})),l.a.createElement("ul",{className:"list-device",ref:r},i),l.a.createElement("div",{className:"bottom-arrow show",ref:o},l.a.createElement("img",{src:"./assets/images/bottom-arrow.png",alt:"bottom"})))};a(43);var Ye=function(e){var t=e.onChange;return l.a.createElement("div",{className:"search-box"},l.a.createElement("input",{placeholder:"Search ... ",onChange:t}))},Xe=(a(44),function(e){var t=Object(n.useState)(e.data),a=Object(Fe.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(Fe.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(!1),p=Object(Fe.a)(d,2),f=p[0],g=p[1];return l.a.createElement("div",{className:"config-form"},l.a.createElement("h3",null,"UIFlow Config"),l.a.createElement("table",{className:"data-table"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"field apikey"},l.a.createElement("td",{className:"key"},"ApiKey:"),l.a.createElement("td",null,l.a.createElement("span",{id:"uiflow_apikey"},r.apikey),l.a.createElement("img",{id:"copy_uiflow_apikey",className:"copy",src:"./assets/images/copy.png",onClick:function(){return e=r.apikey,new window.ClipboardJS("#copy_uiflow_apikey",{text:function(){return e}}),void g(!0);var e}}),f?l.a.createElement("span",{className:"text-copy"},"copied!"):null)),l.a.createElement("tr",{className:"field mode"},l.a.createElement("td",{className:"key"},"Start Mode:"),l.a.createElement("td",null,l.a.createElement("select",{value:r.start,onChange:function(e){return c(Object(s.a)({},r,{start:+e.target.value}))}},l.a.createElement("option",{value:"0"},"Internet Mode"),l.a.createElement("option",{value:"1"},"USB Mode"),l.a.createElement("option",{value:"2"},"App Mode")))),l.a.createElement("tr",{className:"field hold"},l.a.createElement("td",{className:"key"},"Boot Menu:"),l.a.createElement("td",null,l.a.createElement("select",{value:r["startup-hold"],onChange:function(e){return c(Object(s.a)({},r,{"startup-hold":"false"!==e.target.value}))}},l.a.createElement("option",{value:"true"},"True"),l.a.createElement("option",{value:"false"},"False")))),l.a.createElement("tr",{className:"field server"},l.a.createElement("td",{className:"key"},"Server:"),l.a.createElement("td",null,l.a.createElement("select",{value:r.server,onChange:function(e){return c(Object(s.a)({},r,{server:e.target.value}))}},l.a.createElement("option",{value:"flow.m5stack.com"},"flow.m5stack.com"),l.a.createElement("option",{value:"sg.flow.m5stack.com"},"sg.flow.m5stack.com")))),l.a.createElement("tr",{className:"field wifi"},l.a.createElement("td",{className:"key"},"Wifi:"),l.a.createElement("td",null,l.a.createElement("div",{className:"wifi-item"},l.a.createElement("div",{className:"inputbox"},l.a.createElement("span",null,"SSID"),l.a.createElement("input",{defaultValue:r.wifi[0],onChange:function(e){return c(Object(s.a)({},r,{wifi:[e.target.value,r.wifi[1]]}))}})),l.a.createElement("div",{className:"inputbox password"},l.a.createElement("span",null,"Password"),l.a.createElement("input",{type:m?"text":"password",defaultValue:r.wifi[1],onChange:function(e){return c(Object(s.a)({},r,{wifi:[r.wifi[0],e.target.value]}))}}),l.a.createElement("img",{onClick:function(){return u(!m)},className:"btn-eye",src:m?"./assets/images/hide.png":"./assets/images/show.png"}))))),"core"===e.deviceType?l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",{className:"field comx"},l.a.createElement("td",{className:"key"},"COM.X:"),l.a.createElement("td",null,l.a.createElement("select",{value:r.COMX,onChange:function(e){return c(Object(s.a)({},r,{COMX:e.target.value}))}},l.a.createElement("option",{value:"false"},"False"),l.a.createElement("option",{value:"true"},"True")))),l.a.createElement("tr",{className:"field apn"},l.a.createElement("td",{className:"key"},"APN:"),l.a.createElement("td",null,l.a.createElement("input",{defaultValue:r.APN,onChange:function(e){return c(Object(s.a)({},r,{APN:e.target.value}))}})))):null)),l.a.createElement("div",{className:"footer"},l.a.createElement("button",{className:"btn-close",onClick:e.onClose},"Cancel"),l.a.createElement("button",{className:"btn-save",onClick:function(){return e.onSave(r)}},"Save")))});a(45);function Qe(){return l.a.createElement("div",{className:"ball-pulse-sync"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null))}var Ze=Qe,$e=(a(46),function(){var e=Object(n.useState)(localStorage.getItem("ssid")||""),t=Object(Fe.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(localStorage.getItem("password")||""),o=Object(Fe.a)(c,2),i=o[0],s=o[1],m=Object(n.useState)(!1),u=Object(Fe.a)(m,2),d=u[0],p=u[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"wrapper-wifibox"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",null,"SSID:"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",value:a,onChange:function(e){r(e.target.value),localStorage.setItem("ssid",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item password"},l.a.createElement("td",null,"Password:"),l.a.createElement("td",null,l.a.createElement("input",{type:d?"text":"password",value:i,onChange:function(e){s(e.target.value),localStorage.setItem("password",e.target.value)}}),l.a.createElement("img",{className:"btn-eye",src:d?"./assets/images/hide.png":"./assets/images/show.png",onClick:function(){return p(!d)},alt:""}))))))}),et=(a(47),function(e){return l.a.createElement("textarea",{className:"demo-text-area",disabled:!1,value:e.value,readOnly:!0})}),tt=(a(48),["96x96","160x120","176x144","240x176","240x240","320x240","400x296","480x320","640x480","800x600","1024x768","1280x720","1280x1024","1600x1200"]),at=function(e){var t=Object(n.useState)(localStorage.getItem("ssid")||""),a=Object(Fe.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(localStorage.getItem("password")||""),i=Object(Fe.a)(o,2),s=i[0],m=i[1],u=Object(n.useState)(""),d=Object(Fe.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(""),v=Object(Fe.a)(g,2),E=v[0],b=v[1],w=Object(n.useState)(""),h=Object(Fe.a)(w,2),_=h[0],y=h[1],O=Object(n.useState)(""),N=Object(Fe.a)(O,2),k=N[0],S=N[1],C=Object(n.useState)(30),x=Object(Fe.a)(C,2),j=x[0],I=x[1],M=Object(n.useState)(5),T=Object(Fe.a)(M,2),L=T[0],B=T[1],F=Object(n.useState)(!1),H=Object(Fe.a)(F,2),D=H[0],A=H[1],P=tt.map((function(e,t){return l.a.createElement("option",{key:t,value:t},e)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"wrapper-timercambox"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"SSID:"),l.a.createElement("td",null,l.a.createElement("input",{id:"timercam__config__ssid",type:"text",value:r,onChange:function(e){c(e.target.value),localStorage.setItem("ssid",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item password"},l.a.createElement("td",{className:"field-name"},"Password:"),l.a.createElement("td",null,l.a.createElement("input",{id:"timercam__config__password",type:D?"text":"password",value:s,onChange:function(e){m(e.target.value),localStorage.setItem("password",e.target.value)}}),l.a.createElement("img",{className:"btn-eye",src:D?"./assets/images/hide.png":"./assets/images/show.png",onClick:function(){return A(!D)},alt:""}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Wake Time:"),l.a.createElement("td",null,l.a.createElement("input",{id:"timercam__config__waketime",type:"number",value:j,onChange:function(e){return I(e.target.value)},onBlur:function(e){""===e.target.value&&I(30),e.target.value>15240&&I(15240),e.target.value<30&&I(30)}}),l.a.createElement("span",null,"sec (30 ~ 15240)"))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Image Size:"),l.a.createElement("td",null,l.a.createElement("select",{id:"timercam__config__imagesize",value:L,onChange:function(e){return B(e.target.value)}},P))),"TimerCamAliyun"==e.firmware?l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",null),l.a.createElement("td",{style:{padding:0}},l.a.createElement("span",{style:{fontSize:12,color:"#989898"}},"The following options refer to",l.a.createElement("a",{style:{marginLeft:4,cursor:"pointer",textDecoration:"underline"},onClick:function(){return e.gotoRefer("https://help.aliyun.com/document_detail/53045.html")}},"Aliyun OSS Document")))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Access Key:"),l.a.createElement("td",null,l.a.createElement("input",{id:"timercam__config__access_key",type:"text",value:p,onChange:function(e){return f(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Access Key Secret:"),l.a.createElement("td",null,l.a.createElement("input",{id:"timercam__config__access_key_secret",type:"text",value:E,onChange:function(e){return b(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Server Address:"),l.a.createElement("td",null,l.a.createElement("input",{id:"timercam__config__server_address",type:"text",value:_,onChange:function(e){return y(e.target.value)},placeholder:"eg: oss-cn-shenzhen.aliyuncs.com"}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Bucket:"),l.a.createElement("td",null,l.a.createElement("input",{id:"timercam__config__bucket",type:"text",value:k,onChange:function(e){return S(e.target.value)},placeholder:"eg: m5stack-timer-cam"})))):null)))},nt=(a(49),function(){var e=Object(n.useState)(localStorage.getItem("ssid")||""),t=Object(Fe.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(localStorage.getItem("password")||""),o=Object(Fe.a)(c,2),i=o[0],s=o[1],m=Object(n.useState)(60),u=Object(Fe.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(Fe.a)(f,2),v=g[0],E=g[1],b=Object(n.useState)(!1),w=Object(Fe.a)(b,2),h=w[0],_=w[1],y=Object(n.useState)(!1),O=Object(Fe.a)(y,2),N=O[0],k=O[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"wrapper-timercambox"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"SSID:"),l.a.createElement("td",null,l.a.createElement("input",{id:"imagewp__config__ssid",type:"text",value:a,onChange:function(e){r(e.target.value),localStorage.setItem("ssid",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item password"},l.a.createElement("td",{className:"field-name"},"Password:"),l.a.createElement("td",null,l.a.createElement("input",{id:"imagewp__config__password",type:N?"text":"password",value:i,onChange:function(e){s(e.target.value),localStorage.setItem("password",e.target.value)}}),l.a.createElement("img",{className:"btn-eye",src:N?"./assets/images/hide.png":"./assets/images/show.png",onClick:function(){return k(!N)},alt:""}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},l.a.createElement("p",null,"Image Url:"),l.a.createElement("p",null,"(JPG Only)")),l.a.createElement("td",null,l.a.createElement("input",{id:"imagewp__config__url",type:"text",value:v,onChange:function(e){return function(e){""===e.target.value&&_(!1),E(e.target.value)}(e)}}),""!==v?l.a.createElement("img",{id:"__preview__imagewp",height:"200",style:{marginTop:10},src:v,onLoad:function(e){return _(!1),void(document.getElementById("__preview__imagewp").style.display="inline-block")},onError:function(e){return _(!0),void(document.getElementById("__preview__imagewp").style.display="none")}}):null,h?l.a.createElement("p",{style:{fontSize:12,color:"red",marginTop:6}},"Invalid Image Url"):null)),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Wake Time:"),l.a.createElement("td",null,l.a.createElement("input",{id:"imagewp__config__waketime",type:"number",value:d,onChange:function(e){return p(e.target.value)},onBlur:function(e){""===e.target.value&&p(30),e.target.value>172800&&p(172800),e.target.value<60&&p(60)}}),l.a.createElement("span",null,"sec (60 ~ 172800)"))))))}),lt=(a(50),function(e){var t=Object(n.useState)(localStorage.getItem("ssid")||""),a=Object(Fe.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(localStorage.getItem("password")||""),i=Object(Fe.a)(o,2),s=i[0],m=i[1],u=Object(n.useState)(localStorage.getItem("paperws_latitude")||""),d=Object(Fe.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(localStorage.getItem("paperws_longitude")||""),v=Object(Fe.a)(g,2),E=v[0],b=v[1],w=Object(n.useState)("en_US"),h=Object(Fe.a)(w,2),_=h[0],y=h[1],O=Object(n.useState)(""),N=Object(Fe.a)(O,2),k=N[0],S=N[1],C=Object(n.useState)(!1),x=Object(Fe.a)(C,2),j=x[0],I=x[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"wrapper-timercambox"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"SSID:"),l.a.createElement("td",null,l.a.createElement("input",{id:"paperws__config__ssid",type:"text",value:r,onChange:function(e){c(e.target.value),localStorage.setItem("ssid",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item password"},l.a.createElement("td",{className:"field-name"},"Password:"),l.a.createElement("td",null,l.a.createElement("input",{id:"paperws__config__password",type:j?"text":"password",value:s,onChange:function(e){m(e.target.value),localStorage.setItem("password",e.target.value)}}),l.a.createElement("img",{className:"btn-eye",src:j?"./assets/images/hide.png":"./assets/images/show.png",onClick:function(){return I(!j)},alt:""}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Language:"),l.a.createElement("td",null,l.a.createElement("select",{id:"paperws__config__language",value:_,onChange:function(e){return y(e.target.value)}},l.a.createElement("option",{value:"en_US"},"English"),l.a.createElement("option",{value:"zh_CN"},"\u7b80\u4f53\u4e2d\u6587"),l.a.createElement("option",{value:"ja"},"\u65e5\u672c\u8a9e")))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Longitude:"),l.a.createElement("td",null,l.a.createElement("input",{id:"paperws__config__longitude",type:"text",value:E,placeholder:"e.g. 98.765432",onChange:function(e){b(e.target.value),localStorage.setItem("paperws_longitude",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Latitude:"),l.a.createElement("td",null,l.a.createElement("input",{id:"paperws__config__latitude",type:"text",value:p,placeholder:"e.g. 123.456789",onChange:function(e){f(e.target.value),localStorage.setItem("paperws_latitude",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Apikey:"),l.a.createElement("td",null,l.a.createElement("input",{id:"paperws__config__apikey",type:"text",value:k,onChange:function(e){return S(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",null),l.a.createElement("td",{style:{padding:0}},l.a.createElement("span",{style:{fontSize:12,color:"#989898"}},"Apply to use the API here",l.a.createElement("a",{style:{marginLeft:4,cursor:"pointer",textDecoration:"underline"},onClick:function(){return e.gotoApplyApi("http://www.caiyun.org/")}},"http://www.caiyun.org/")))))))}),rt=a(24),ct=a.n(rt),ot=(a(56),function(e){return l.a.createElement("div",{className:"qrcode-modal"},l.a.createElement("h3",null,l.a.createElement("p",null,"Token"),l.a.createElement("p",null,e.token)),l.a.createElement(ct.a,{value:"http://api.m5stack.com:5003/timer-cam/image?tok="+e.token,size:200,fgColor:"#000000"}),l.a.createElement("h3",null,"Scan QRCode to browser your image."))}),it=a(13),st=(a(57),[{text:"1920x1080",value:14},{text:"1280x720",value:11},{text:"640x480",value:8}]);var mt=function(e){Object(it.a)(e);var t=Object(n.useState)(localStorage.getItem("ssid")||""),a=Object(Fe.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(localStorage.getItem("password")||""),i=Object(Fe.a)(o,2),s=i[0],m=i[1],u=Object(n.useState)(""),d=Object(Fe.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(""),v=Object(Fe.a)(g,2),E=v[0],b=v[1],w=Object(n.useState)(""),h=Object(Fe.a)(w,2),_=h[0],y=h[1],O=Object(n.useState)(""),N=Object(Fe.a)(O,2),k=N[0],S=N[1],C=Object(n.useState)("img"),x=Object(Fe.a)(C,2),j=x[0],I=x[1],M=Object(n.useState)(14),T=Object(Fe.a)(M,2),L=T[0],B=T[1],F=Object(n.useState)(5),H=Object(Fe.a)(F,2),D=H[0],A=H[1],P=Object(n.useState)(!1),R=Object(Fe.a)(P,2),U=R[0],z=R[1],W=Object(n.useState)(!1),G=Object(Fe.a)(W,2),V=G[0],q=G[1],K=st.map((function(e,t){return l.a.createElement("option",{key:t,value:e.value},e.text)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"wrapper-timercambox"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"WIFI SSID:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__ssid",type:"text",value:r,onChange:function(e){c(e.target.value),localStorage.setItem("ssid",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item password"},l.a.createElement("td",{className:"field-name"},"WIFI Password:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__password",type:U?"text":"password",value:s,onChange:function(e){m(e.target.value),localStorage.setItem("password",e.target.value)}}),l.a.createElement("img",{className:"btn-eye",src:U?"./assets/images/hide.png":"./assets/images/show.png",onClick:function(){return z(!U)},alt:""}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Host/IP:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__host",placeholder:"eg: xxxxxxx.com or 0.0.0.0",type:"text",value:p,onChange:function(e){return f(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Username:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__user",type:"text",value:E,onChange:function(e){return b(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item password"},l.a.createElement("td",{className:"field-name"},"Password:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__smbpassword",type:V?"text":"password",value:_,onChange:function(e){return y(e.target.value)}}),l.a.createElement("img",{className:"btn-eye",src:U?"./assets/images/hide.png":"./assets/images/show.png",onClick:function(){return q(!V)},alt:""}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"FolderPath:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__path",type:"text",placeholder:"eg: examples/demo",value:k,onChange:function(e){return S(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"FilePrefix:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__prefix",type:"text",value:j,onChange:function(e){return I(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Image Size:"),l.a.createElement("td",null,l.a.createElement("select",{id:"smbtimercam__config__imagesize",value:L,onChange:function(e){return B(e.target.value)}},K))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Interval:"),l.a.createElement("td",null,l.a.createElement("input",{id:"smbtimercam__config__interval",type:"number",value:D,onChange:function(e){return A(e.target.value)}}),l.a.createElement("span",null,"(senconds)"))))))},ut=(a(58),[{text:"1920x1080",value:14},{text:"1280x720",value:11},{text:"640x480",value:8}]),dt=function(e){Object(it.a)(e);var t=Object(n.useState)(localStorage.getItem("ssid")||""),a=Object(Fe.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(localStorage.getItem("password")||""),i=Object(Fe.a)(o,2),s=i[0],m=i[1],u=Object(n.useState)(""),d=Object(Fe.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(""),v=Object(Fe.a)(g,2),E=v[0],b=v[1],w=Object(n.useState)(""),h=Object(Fe.a)(w,2),_=h[0],y=h[1],O=Object(n.useState)("pic"),N=Object(Fe.a)(O,2),k=N[0],S=N[1],C=Object(n.useState)(14),x=Object(Fe.a)(C,2),j=x[0],I=x[1],M=Object(n.useState)(20),T=Object(Fe.a)(M,2),L=T[0],B=T[1],F=Object(n.useState)(!1),H=Object(Fe.a)(F,2),D=H[0],A=H[1],P=ut.map((function(e,t){return l.a.createElement("option",{key:t,value:e.value},e.text)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"wrapper-timercambox"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"WIFI SSID:"),l.a.createElement("td",null,l.a.createElement("input",{id:"awsosstimercam__config__ssid",type:"text",value:r,onChange:function(e){c(e.target.value),localStorage.setItem("ssid",e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item password"},l.a.createElement("td",{className:"field-name"},"WIFI Password:"),l.a.createElement("td",null,l.a.createElement("input",{id:"awsosstimercam__config__password",type:D?"text":"password",value:s,onChange:function(e){m(e.target.value),localStorage.setItem("password",e.target.value)}}),l.a.createElement("img",{className:"btn-eye",src:D?"./assets/images/hide.png":"./assets/images/show.png",onClick:function(){return A(!D)},alt:""}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Access Key:"),l.a.createElement("td",null,l.a.createElement("input",{id:"awsosstimercam__config__access_key",type:"text",value:p,onChange:function(e){return f(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Secret Key:"),l.a.createElement("td",null,l.a.createElement("input",{id:"awsosstimercam__config__access_key_secret",type:"text",value:E,onChange:function(e){return b(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"URL:"),l.a.createElement("td",null,l.a.createElement("input",{id:"awsosstimercam__config__url",type:"text",value:_,onChange:function(e){return y(e.target.value)},placeholder:"eg: example.s3.amazonaws.com/example"}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"FilePrefix:"),l.a.createElement("td",null,l.a.createElement("input",{id:"awsosstimercam__config__prefix",type:"text",value:k,onChange:function(e){return S(e.target.value)}}))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Image Size:"),l.a.createElement("td",null,l.a.createElement("select",{id:"awsosstimercam__config__imagesize",value:j,onChange:function(e){return I(e.target.value)}},P))),l.a.createElement("tr",{className:"wifibox-item"},l.a.createElement("td",{className:"field-name"},"Interval:"),l.a.createElement("td",null,l.a.createElement("input",{id:"awsosstimercam__config__interval",type:"number",value:L,onChange:function(e){return B(e.target.value)}}),l.a.createElement("span",null,"(senconds)"))))))},pt=(a(59),void 0),ft=window.require("electron"),gt=ft.ipcRenderer,vt=ft.shell,Et=null,bt=function(e){vt.openExternal(e)},wt=function(e){var t=e.closeModal,a={com:e.com,name:e.firmware.name,version:e.version,type:e.type,other:e.other||null},n=localStorage.getItem("ssid"),r=localStorage.getItem("password");void 0!=n&&void 0!=r&&""!=n&&""!=r&&(a.ssid=n,a.password=r);var c=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"footer-btn"},l.a.createElement("button",{onClick:function(){gt.send(he,null);var e="".concat(oe,"Callback-").concat(a.com);gt.eventNames().includes(e)&&gt.off(e,gt.listeners(e)[0]),t()}},"Close")));e.openModal(l.a.createElement(ze,{footer:c,com:a.com})),e.startStdoutMessage("=================\nStart Burn\n=================\n"),Ce(a.com,oe,a,(function(t){e.appendStdoutMessage(t)})),gt.once("notify-bind",(function(t,a){!1===a&&window.swal({className:"binding-tip-modal",title:"",text:"It is detected that this device is still unbound, whether to bind to the account now?",icon:"warning",buttons:{confirm:{text:"Yes",value:!0},cancel:{text:"No",value:!1,visible:!0}}}).then((function(t){t&&(window.swal({title:"",text:"Adding device, wait a minute...",icon:"warning",closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1}),Se(Oe,{com:e.com,firmware:e.firmware.name,firmwareVersion:e.version,type:e.type},(function(e){if(-1===e)return pt.props.setLoginState(!1),void window.swal({title:"",text:"The login status has expired, please log in again",icon:"warning"});!1===e?window.swal({title:"",text:"Invalid device",icon:"error"}):!0===e?window.swal({title:"",text:"Device has been added in your account.",icon:"success"}):-1e3===e?window.swal({title:"",text:"Network occured errors",icon:"error"}):400===e?window.swal({className:"binding-tip-modal",title:"",text:"This device has been bound, try again after unbinding.",icon:"error"}):window.swal({title:"",text:"Network occured errors",icon:"error"})})))}))}))},ht=function(e){var t=e.closeModal,a={com:e.com,name:e.firmware.name,version:e.version,type:e.type};e.openModal(l.a.createElement(Ze,null)),Ce(e.com,be,a,(function(n){if(e.closeModal(),"Error"!==n){var r={};try{r=JSON.parse(n)}catch(c){return void window.swal({title:"Tips",text:"Invalid data received, check your device.",icon:"error",buttons:{confirm:{text:"Cancel"}}})}setTimeout((function(){e.openModal(l.a.createElement(Xe,{deviceType:e.type,data:r,onClose:function(){var e="".concat(be,"Callback-").concat(a.com);gt.eventNames().includes(e)&&gt.off(e,gt.listeners(e)[0]),t()},onSave:function(t){!function(e,t,a){void 0===a.APN&&(a.APN="");""===a.APN?window.swal({title:"Tips",text:'APN is required, if you continue, "CMNET" will be used by default.',icon:"warning",buttons:{confirm:{text:"Continue",value:1},cancel:{text:"Back",value:0,visible:!0}}}).then((function(n){1===n&&(a.APN="CMNET",_t(e,t,a))})):_t(e,t,a)}(e,a,t)}}))}),300)}else window.swal({title:"Tips",text:"Get UIFlow settings failed, check your COM and retry.",icon:"error",buttons:{confirm:{text:"Cancel"}}})}))};function _t(e,t,a){e.closeModal(),window.swal({title:"Tips",text:"Writing data, do not close.",icon:"warning",buttons:!1}),Ce(e.com,we,Object(s.a)({},t,{option:Object(s.a)({},a)}),(function(e){var a="".concat(we,"Callback-").concat(t.com);gt.eventNames().includes(a)&&gt.off(a,gt.listeners(a)[0]),"Ok"===e?window.swal({title:"Success",text:"Update successfully.",icon:"success"}):window.swal({title:"Failed",text:"Update falied.",icon:"error"})}))}var yt=Object(o.b)((function(e){return{com:e.burn.com,selectedType:e.firmware.selected}}),(function(e){return{openModal:function(t){return e(T({component:t}))},closeModal:function(t){return e(L({animation:p}))},startStdoutMessage:function(t){return e(U({message:t}))},appendStdoutMessage:function(t){return e(z({message:t}))}}}))((function(e){var t=e.firmware,a=e.downloadHanlder,r=e.removeHandler,o=e.device;t.versions.sort((function(e,t){return Date.parse(new Date(t.publishAt))-Date.parse(new Date(e.publishAt))}));var i=Object(n.useState)({}),m=Object(Fe.a)(i,2),u=m[0],d=m[1],p=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=0;null!=p&&(e=t.versions.findIndex((function(e){return e.version===p.current.value}))),d(t.versions[e])}),[t,u]);var g=t.versions.map((function(e){return l.a.createElement("option",{key:e.version},e.version)})),E=function(){return l.a.createElement("button",{className:$()("btn","info"),onClick:function(){var e=document.createElement("div");c.a.render(l.a.createElement(et,{value:t.dataDemo}),e),window.swal({content:e,className:"data-demo-modal"}).then((function(e){}))}},l.a.createElement("div",{className:"mask"}),l.a.createElement("span",null,"Data Demo"))},b=parseInt(t.downloaded),w="";return isNaN(b)||(w=b>=1e4?(b/1e3).toFixed(1)+"k":b.toString()),l.a.createElement("div",{className:$()("wrapper-item-firmware","fake-out")},l.a.createElement("article",{className:"item"},l.a.createElement("img",{className:"cover",src:t.cover?"./assets/cover/".concat(t.cover):"./assets/cover/default.png",onError:function(e){return function(e,t){e.persist(),e.target.src="./assets/cover/default.png";var a=setTimeout((function(){e.target.src=t,clearTimeout(a)}),5e3)}(e,"./assets/cover/".concat(t.cover))},draggable:"false",onMouseOver:function(e){e.target.__firstInited&&!e.target.__played&&(e.target.__played=!0,e.target.play())},onMouseLeave:function(e){e.target.__firstInited&&e.target.__played&&(e.target.__played=!1,e.target.stop())},onLoad:function(e){e.target.__firstInited||e.target.src.endsWith(".gif")&&(e.target.__firstInited=!0,e.target.__played=!1,e.target.stop())}}),l.a.createElement("h2",null,l.a.createElement("span",{className:"name"},t.name),"M5Stack"===t.publisher?l.a.createElement("span",{className:"tag"},"official"):null,l.a.createElement("select",{className:"selector-version",onChange:function(t){d(e.firmware.versions.find((function(e){return e.version===t.target.value})))},ref:p},g),t.repoLink?l.a.createElement("a",{className:"link",href:t.repoLink,onClick:function(e){return function(e,t){e.preventDefault(),vt.openExternal(t)}(e,t.repoLink)}},l.a.createElement("i",{className:"iconfont icon-github github"})):null),l.a.createElement("p",null,t.description),l.a.createElement("div",{className:"footer"},u.exist?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn remove",onClick:function(){return r({name:t.name,version:u.version})}},l.a.createElement("div",{className:"mask"}),l.a.createElement("i",{className:"iconfont icon-delete"}),l.a.createElement("span",null,"Remove")),"ECHOSTT"===t.name.toUpperCase()||"TIMERCAM"===t.name.toUpperCase()?l.a.createElement("button",{className:"btn remove",onClick:function(){!function(e){Et=e;var t={com:e.com};window.swal({title:"Tips",text:"Getting token ...",icon:"warning",buttons:!1});var a={};Ce(t.com,Ee,t,(function(e){if(1===e.state){if("timercam"===Et.device){var t=document.createElement("div");c.a.render(l.a.createElement(ot,{token:e.message}),t),a={content:t,buttons:{confirm:{text:"Copy Token",value:!0,closeModal:!1,className:"__token_copy"},view:{text:"View in browser",value:"view",closeModal:!1,visible:!0},cancel:{text:"Ok",value:!1,visible:!0}}}}else a={title:"Success",text:"Token: ".concat(e.message),icon:"success",buttons:{confirm:{text:"Copy",value:!0,closeModal:!1,className:"__token_copy"},cancel:{text:"Ok",value:!1,visible:!0}}};window.swal(a).then((function(t){if("view"===t)return vt.openExternal("http://api.m5stack.com:5003/timer-cam/image?tok=".concat(e.message)),void window.swal.stopLoading();t&&(new window.ClipboardJS(".__token_copy",{text:function(){return e.message}}),window.swal.stopLoading(),document.getElementsByClassName("__token_copy")[0].innerText="Copied")}))}else window.swal({title:"Error",text:"Get token failed. ".concat(e.message,"."),icon:"error",buttons:{confirm:{text:"Cancel"}}})}))}(e)}},l.a.createElement("div",{className:"mask"}),l.a.createElement("span",null,"Get Token")):t.name.indexOf("UIFlow")>-1?l.a.createElement("button",{className:"btn remove",onClick:function(){ht(Object(s.a)({},e,{version:u.version,type:o}))}},l.a.createElement("div",{className:"mask"}),l.a.createElement("i",{className:"iconfont icon-setting"}),l.a.createElement("span",null,"Configuration")):null,"stickv"===o?E():null,l.a.createElement("button",{className:"btn burn",onClick:function(){return function(e){if(e.firmware.name.indexOf("UIFlow")>-1||"EchoSTT"===e.firmware.name){var t=document.createElement("div");c.a.render(l.a.createElement($e,null),t),window.swal({className:"wifi-modal",icon:"info",content:t,closeOnClickOutside:!1,closeOnEsc:!1,title:"Wifi Setting",buttons:{confirm:{text:"Cancel",value:!1},cancel:{text:"Start",value:!0,visible:!0}}}).then((function(t){t&&wt(e)}))}else if("TimerCam"===e.firmware.name){var a=document.createElement("div");c.a.render(l.a.createElement(at,{gotoRefer:bt,firmware:e.firmware.name}),a),window.swal({className:"timercfg-modal",content:a,closeOnClickOutside:!1,closeOnEsc:!1,title:"TimerCam Configuration",buttons:{confirm:{text:"Cancel",value:"cancel"},cancel:{text:"Burn",value:"burn",visible:!0}}}).then((function(t){if("burn"===t){var a={ssid:document.getElementById("timercam__config__ssid").value,password:document.getElementById("timercam__config__password").value,wakeTime:document.getElementById("timercam__config__waketime").value,imageSize:document.getElementById("timercam__config__imagesize").value};wt(Object(s.a)({},e,{other:Object(s.a)({},a)}))}}))}else if("TimerCamAliyun"===e.firmware.name){var n=document.createElement("div");c.a.render(l.a.createElement(at,{gotoRefer:bt,firmware:e.firmware.name}),n),window.swal({className:"timercfg-modal",content:n,closeOnClickOutside:!1,closeOnEsc:!1,title:"TimerCam Configuration",buttons:{confirm:{text:"Cancel",value:"cancel"},cancel:{text:"Burn",value:"burn",visible:!0}}}).then((function(t){if("burn"===t){var a={ssid:document.getElementById("timercam__config__ssid").value,password:document.getElementById("timercam__config__password").value,wakeTime:document.getElementById("timercam__config__waketime").value,imageSize:document.getElementById("timercam__config__imagesize").value,accessKey:document.getElementById("timercam__config__access_key").value,accessKeySecret:document.getElementById("timercam__config__access_key_secret").value,serverAddr:document.getElementById("timercam__config__server_address").value,bucket:document.getElementById("timercam__config__bucket").value};wt(Object(s.a)({},e,{other:Object(s.a)({},a)}))}}))}else if("TimerFolderPusher"===e.firmware.name){var r=document.createElement("div");c.a.render(l.a.createElement(mt,{gotoRefer:bt,firmware:e.firmware.name}),r),window.swal({className:"timercfg-modal",content:r,closeOnClickOutside:!1,closeOnEsc:!1,title:"Configuration",buttons:{confirm:{text:"Cancel",value:"cancel"},cancel:{text:"Burn",value:"burn",visible:!0}}}).then((function(t){if("burn"===t){var a={ssid:document.getElementById("smbtimercam__config__ssid").value,password:document.getElementById("smbtimercam__config__password").value,host:document.getElementById("smbtimercam__config__host").value,user:document.getElementById("smbtimercam__config__user").value,smbpassword:document.getElementById("smbtimercam__config__smbpassword").value,path:document.getElementById("smbtimercam__config__path").value,prefix:document.getElementById("smbtimercam__config__prefix").value,imageSize:document.getElementById("smbtimercam__config__imagesize").value,interval:document.getElementById("smbtimercam__config__interval").value};wt(Object(s.a)({},e,{other:Object(s.a)({},a)}))}}))}else if("TimerS3FolderPusher"===e.firmware.name){var o=document.createElement("div");c.a.render(l.a.createElement(dt,null),o),window.swal({className:"timercfg-modal",content:o,closeOnClickOutside:!1,closeOnEsc:!1,title:"Configuration",buttons:{confirm:{text:"Cancel",value:"cancel"},cancel:{text:"Burn",value:"burn",visible:!0}}}).then((function(t){if("burn"===t){var a=document.getElementById("awsosstimercam__config__ssid").value,n=document.getElementById("awsosstimercam__config__password").value,l=document.getElementById("awsosstimercam__config__url").value.replace("https://","").replace("http://",""),r=l.substring(0,l.indexOf("/")),c=l.substring(l.indexOf("/")),o={ssid:a,password:n,accessKey:document.getElementById("awsosstimercam__config__access_key").value,accessKeySecret:document.getElementById("awsosstimercam__config__access_key_secret").value,host:r,path:c,prefix:document.getElementById("awsosstimercam__config__prefix").value,imageSize:document.getElementById("awsosstimercam__config__imagesize").value,interval:document.getElementById("awsosstimercam__config__interval").value};wt(Object(s.a)({},e,{other:Object(s.a)({},o)}))}}))}else if("paper"===e.type&&"OnlineImage"===e.firmware.name){var i=document.createElement("div");c.a.render(l.a.createElement(nt,null),i),window.swal({className:"timercfg-modal",content:i,closeOnClickOutside:!1,closeOnEsc:!1,title:"OnlineImage Configuration",buttons:{confirm:{text:"Cancel",value:"cancel"},cancel:{text:"Burn",value:"burn",visible:!0}}}).then((function(t){if("burn"===t){var a=document.getElementById("imagewp__config__ssid").value,n=document.getElementById("imagewp__config__password").value,l=document.getElementById("imagewp__config__waketime").value,r=document.getElementById("imagewp__config__url").value;if(""===r.trim())return void window.swal({text:"Image url is required.",icon:"warning"});var c={ssid:a,password:n,wakeTime:l,url:r};wt(Object(s.a)({},e,{other:Object(s.a)({},c)}))}}))}else if("paper"===e.type&&"WeatherStation"===e.firmware.name){var m=document.createElement("div");c.a.render(l.a.createElement(lt,{gotoApplyApi:bt}),m),window.swal({className:"timercfg-modal",content:m,closeOnClickOutside:!1,closeOnEsc:!1,title:"Weather Station Configuration",buttons:{confirm:{text:"Cancel",value:"cancel"},cancel:{text:"Burn",value:"burn",visible:!0}}}).then((function(t){if("burn"===t){var a=document.getElementById("paperws__config__ssid").value,n=document.getElementById("paperws__config__password").value,l=document.getElementById("paperws__config__latitude").value,r=document.getElementById("paperws__config__longitude").value,c=document.getElementById("paperws__config__language").value,o=document.getElementById("paperws__config__apikey").value;if("number"!==typeof parseFloat(l))return void window.swal({text:"Invalid latitude.",icon:"warning"});if("number"!==typeof parseFloat(r))return void window.swal({text:"Invalid longitude.",icon:"warning"});if(""===o||void 0===o)return void window.swal({text:"Invalid Apikey.",icon:"warning"});""===n&&(n="null");var i={ssid:a,password:n,latitude:l,longitude:r,apikey:o,language:c};wt(Object(s.a)({},e,{other:Object(s.a)({},i)}))}}))}else wt(e)}(Object(s.a)({},e,{version:u.version,type:o}))}},l.a.createElement("div",{className:"mask"}),l.a.createElement("i",{className:"iconfont icon-hot-or-burn-interface-symbol"}),l.a.createElement("span",null,"Burn"))):l.a.createElement(l.a.Fragment,null,"stickv"===o?E():null,l.a.createElement("button",{className:$()("btn","download",u.downloadStatus===f?"downloading":""),onClick:function(){return a({name:t.name,version:u.version,type:o})}},l.a.createElement("div",{className:"mask"}),function(e){var t=e.selectedVersion;if(!t.downloadStatus)return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"iconfont icon-clouddownload"}),l.a.createElement("span",null,"Download"));switch(t.downloadStatus){case f:var a={width:115*t.progress+"px"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"progress",style:a}),l.a.createElement("span",null,"Downloading"));case v:return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"iconfont icon-clouddownload"}),l.a.createElement("span",null,"Retry"));default:return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"iconfont icon-clouddownload"}),l.a.createElement("span",null,"Download"))}}({selectedVersion:u})))),l.a.createElement("div",{className:"remark"},l.a.createElement("div",null,l.a.createElement("div",{className:"left"},l.a.createElement("span",null,"Author: ",t.publisher)),l.a.createElement("div",{className:"right"},l.a.createElement("i",{className:"iconfont icon-clouddownload"}),l.a.createElement("span",null,w)),l.a.createElement("div",{className:"clear-fix"})))))}));a(60);var Ot=function(e){var t=e.firmwareList,a=e.downloadHanlder,r=e.removeHandler,c=e.device,o=Object(n.useRef)();if(Object(n.useEffect)((function(){function e(e){e.preventDefault(),o.current.style.transform="translateY(-".concat(e.srcElement.scrollTop,"px)")}return o.current.parentElement.addEventListener("scroll",e),function(){o.current.parentElement.removeEventListener("scroll",e)}}),[]),!t)return l.a.createElement("div",{className:"list-firmware"});var i=t.map((function(e,t){return l.a.createElement(yt,{key:c+"-"+e.name,device:c,firmware:e,downloadHanlder:a,removeHandler:r})}));return l.a.createElement("div",{className:"list-firmware",ref:o},i)},Nt=(a(61),window.require("electron").ipcRenderer),kt=function(e){Object(Le.a)(a,e);var t=Object(Te.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).state={loading:!0},n.downloadHanlder=n.downloadHanlder.bind(Object(Me.a)(n)),n.removeHanlder=n.removeHanlder.bind(Object(Me.a)(n)),n._updateFirmwares=n._updateFirmwares.bind(Object(Me.a)(n)),n.setCurrentDevice=n.setCurrentDevice.bind(Object(Me.a)(n)),n.inputChangeHandler=n.inputChangeHandler.bind(Object(Me.a)(n)),n}return Object(Ie.a)(a,[{key:"componentWillMount",value:function(){this._getFirmwares()}},{key:"_getFirmwares",value:function(){var e=this;this.setState({loading:!0}),Se(de,!1,(function(t){console.log(t),e.setState({loading:!1}),null!==t&&e.props.getFirmwares(t)}))}},{key:"_updateFirmwares",value:function(e){var t=this;Se(de,e,(function(e){null!==e&&t.props.updateFirmwares(e)}))}},{key:"removeHanlder",value:function(e){var t=this,a=this._updateFirmwares;window.swal({title:"Tips",text:"Do you sure to delete this firmware?",icon:"warning",buttons:{ok:"Yes",cancel:"No"}}).then((function(n){if("ok"==n){var l=e.name,r=e.version,c=t.props.firmware.selected;ke(fe,{firmware:l,version:r,type:c},(function(e){e&&a(!0)}))}}))}},{key:"downloadHanlder",value:function(e){var t=this._updateFirmwares,a=e.name,n=e.version,l=e.type,r="".concat(pe,"Callback-").concat(a,"-").concat(l,"-").concat(n),c=this.props.updateFirmwareDownloadStatus;Nt.send(pe,{firmware:a,version:n,type:l}),Nt.eventNames().includes(r)||Nt.on(r,(function(e,o){if(null!==o)return"end"===o?(c({name:a,version:n,type:l,downloadStatus:v,progress:0}),void Nt.off(r,this.listeners(r)[0])):1==o?(c({name:a,version:n,type:l,downloadStatus:g,progress:1}),Nt.off(r,this.listeners(r)[0]),void t(!0)):void c({name:a,version:n,type:l,downloadStatus:f,progress:o})}))}},{key:"setCurrentDevice",value:function(e){var t="1500000";switch(e){case"core":t="1500000";break;case"stickc":case"atom":t="750000";break;case"stickv":case"timercam":case"coreink":t="1500000"}this.props.setSelectedDeviceType(e),this.props.setBaudrate(t),ke(ie,{key:"baudrate",value:t})}},{key:"inputChangeHandler",value:function(e){this.props.searchFirmware(e.target.value)}},{key:"render",value:function(){var e=this.state.loading,t=this.props.firmware,a=t.list,n=t.selected,r=this.props.global.owns;return l.a.createElement("div",{className:"container-firmware"},l.a.createElement(Je,{owns:r,selected:n,setSelected:this.setCurrentDevice}),l.a.createElement("div",{className:"wrapper-firmware-list"},e?l.a.createElement(Qe,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(Ye,{onChange:this.inputChangeHandler}),l.a.createElement("div",{className:$()("list","core"===n?"active":"")},l.a.createElement(Ot,{device:"core",firmwareList:a.core,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","core2"===n?"active":"")},l.a.createElement(Ot,{device:"core2",firmwareList:a.core2,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","stickc"===n?"active":"")},l.a.createElement(Ot,{device:"stickc",firmwareList:a.stickc,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","atom"===n?"active":"")},l.a.createElement(Ot,{device:"atom",firmwareList:a.atom,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","stickv"===n?"active":"")},l.a.createElement(Ot,{device:"stickv",firmwareList:a.stickv,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","timercam"===n?"active":"")},l.a.createElement(Ot,{device:"timercam",firmwareList:a.timercam,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","coreink"===n?"active":"")},l.a.createElement(Ot,{device:"coreink",firmwareList:a.coreink,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","paper"===n?"active":"")},l.a.createElement(Ot,{device:"paper",firmwareList:a.paper,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})),l.a.createElement("div",{className:$()("list","stamp"===n?"active":"")},l.a.createElement(Ot,{device:"stamp",firmwareList:a.stamp,downloadHanlder:this.downloadHanlder,removeHandler:this.removeHanlder})))))}}]),a}(l.a.Component),St=Object(o.b)((function(e){return{firmware:e.firmware,global:e.global}}),(function(e){return{getFirmwares:function(t){return e({type:G,payload:t})},updateFirmwares:function(t){return e({type:V,payload:t})},setSelectedDeviceType:function(t){return e({type:q,payload:t})},updateFirmwareDownloadStatus:function(t){return e(function(e){return{type:K,payload:e}}(t))},setBaudrate:function(t){return e(D({baudrate:t}))},searchFirmware:function(t){return e({type:J,payload:t})}}}))(kt),Ct=(a(62),function(e){Object(Le.a)(a,e);var t=Object(Te.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).beforeCloseModal=n.beforeCloseModal.bind(Object(Me.a)(n)),n}return Object(Ie.a)(a,[{key:"beforeCloseModal",value:function(){this.props.setAnimation(p)}},{key:"shouldComponentUpdate",value:function(e){var t=this;return this.props.modal.visiable!==e.modal.visiable&&e.modal.visiable&&setTimeout((function(){t.props.setAnimation(d)})),this.props.modal.animation!==e.modal.animation&&e.modal.animation===p&&setTimeout((function(){t.props.closeModal()}),250),!0}},{key:"render",value:function(){var e=this.props.modal,t=e.visiable,a=e.component,n=e.animation;return t?l.a.createElement("div",{className:$()("full-main",n)},l.a.createElement("div",{className:"mask",onClick:this.beforeCloseModal}),l.a.createElement("div",{className:"modal"},a)):null}}]),a}(l.a.Component)),xt=Object(o.b)((function(e){return{modal:e.modal}}),(function(e){return{closeModal:function(t){return e({type:I})},setAnimation:function(t){return e(L({animation:t}))}}}))(Ct);a(63);var jt=window.require("electron").ipcRenderer,It=Object(o.b)((function(e){return{theme:e.global.theme}}),(function(e){return{setTheme:function(t){return e(k({theme:t}))},setBaudrate:function(t){return e(D({baudrate:t}))},setBurnParams:function(t){return e(S(Object(s.a)({},t)))},setVersion:function(t){return e({type:_,payload:{version:t}})},setLastestVersion:function(t){return e({type:y,payload:{lastest:t}})},setLoginState:function(t){return e(C({loginState:t.isLogin,ssoToken:t.ssoToken}))},setOwns:function(t){return e({type:N,payload:{owns:t}})}}}))((function(e){var t=e.theme,a=e.setTheme,r=e.setBurnParams,c=e.setBaudrate,o=e.setVersion,i=e.setLastestVersion,s=e.setLoginState,m=e.setOwns;return Object(n.useEffect)((function(){ke(se,null,(function(e){console.log(e),a(e.theme),r(e.burnParams),c(e.baudrate),o(e.version),i(e.lastest),s({isLogin:e.isLogin,ssoToken:e.ssoToken})})),jt.on("GET_ALL_HARDWARES",(function(e,t){var a=t.data;m(a)}))}),[]),l.a.createElement("div",{className:$()("main",t)},l.a.createElement(Re,null),l.a.createElement(Ke,null),l.a.createElement(St,null),l.a.createElement(xt,null))})),Mt=(a(64),function(){return l.a.createElement(o.a,{store:Q},l.a.createElement(It,null))});c.a.render(l.a.createElement(Mt,null),document.getElementById("app"))}]),[[25,1,2]]]);
//# sourceMappingURL=main.489cc7da.chunk.js.map